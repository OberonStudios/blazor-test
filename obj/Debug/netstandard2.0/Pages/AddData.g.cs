#pragma checksum "/home/aakatev/Documents/projects20/BlazorApp1/Pages/AddData.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "8a723890b533ed7672b0ffbf0c6e1ae4ca219b7b"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorApp1.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Blazor;
    using Microsoft.AspNetCore.Blazor.Components;
    using System.Net.Http;
    using Microsoft.AspNetCore.Blazor.Layouts;
    using Microsoft.AspNetCore.Blazor.Routing;
    using Microsoft.JSInterop;
    using BlazorApp1;
    using BlazorApp1.Shared;
    [Microsoft.AspNetCore.Blazor.Layouts.LayoutAttribute(typeof(MainLayout))]

    [Microsoft.AspNetCore.Blazor.Components.RouteAttribute("/get_robot")]
    public class AddData : Microsoft.AspNetCore.Blazor.Components.BlazorComponent
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Blazor.RenderTree.RenderTreeBuilder builder)
        {
            base.BuildRenderTree(builder);
            builder.OpenElement(0, "div");
            builder.AddAttribute(1, "class", "card text-center");
            builder.AddContent(2, "\n  ");
            builder.AddMarkupContent(3, "<div class=\"card-header\">\n    <h3>Create a new robot</h3>\n  </div>\n  ");
            builder.OpenElement(4, "div");
            builder.AddAttribute(5, "class", "card-body");
            builder.AddContent(6, "\n    ");
            builder.OpenElement(7, "form");
            builder.AddContent(8, "\n      ");
            builder.OpenElement(9, "div");
            builder.AddAttribute(10, "class", "form-group");
            builder.AddContent(11, "\n        ");
            builder.OpenElement(12, "p");
            builder.OpenElement(13, "img");
            builder.AddAttribute(14, "alt", "Generic placeholder image");
            builder.AddAttribute(15, "width", "400");
            builder.AddAttribute(16, "height", "400");
            builder.AddAttribute(17, "class", "rounded-circle" + " img-fluid" + " " + (hidden_pic));
            builder.AddAttribute(18, "src", "https://robohash.org/" + (current_id));
            builder.CloseElement();
            builder.CloseElement();
            builder.AddContent(19, "\n        ");
            builder.OpenElement(20, "div");
            builder.AddAttribute(21, "class", "btn-group btn-group-toggle");
            builder.AddAttribute(22, "data-toggle", "buttons");
            builder.AddContent(23, "\n          ");
            builder.OpenElement(24, "button");
            builder.AddAttribute(25, "onclick", Microsoft.AspNetCore.Blazor.Components.BindMethods.GetEventHandlerValue<Microsoft.AspNetCore.Blazor.UIMouseEventArgs>(increaseCount));
            builder.AddAttribute(26, "type", "button");
            builder.AddAttribute(27, "class", "btn btn-secondary btn-sm");
            builder.AddContent(28, "Prev");
            builder.CloseElement();
            builder.AddContent(29, "\n          ");
            builder.OpenElement(30, "button");
            builder.AddAttribute(31, "onclick", Microsoft.AspNetCore.Blazor.Components.BindMethods.GetEventHandlerValue<Microsoft.AspNetCore.Blazor.UIMouseEventArgs>(decreaseCount));
            builder.AddAttribute(32, "type", "button");
            builder.AddAttribute(33, "class", "btn btn-secondary btn-sm");
            builder.AddContent(34, "Next");
            builder.CloseElement();
            builder.AddContent(35, "\n        ");
            builder.CloseElement();
            builder.AddContent(36, "\n        ");
            builder.OpenElement(37, "div");
            builder.AddAttribute(38, "id", "input");
            builder.AddContent(39, "\n          ");
            builder.AddMarkupContent(40, "<label for=\"name\">Name</label>\n          ");
            builder.OpenElement(41, "input");
            builder.AddAttribute(42, "type", "text");
            builder.AddAttribute(43, "class", "form-control");
            builder.AddAttribute(44, "id", "name");
            builder.AddAttribute(45, "value", Microsoft.AspNetCore.Blazor.Components.BindMethods.GetValue(current_name));
            builder.AddAttribute(46, "onchange", Microsoft.AspNetCore.Blazor.Components.BindMethods.SetValueHandler(__value => current_name = __value, current_name));
            builder.CloseElement();
            builder.AddContent(47, "\n        ");
            builder.CloseElement();
            builder.AddContent(48, "\n        ");
            builder.OpenElement(49, "div");
            builder.AddAttribute(50, "id", "validation_alert");
            builder.AddAttribute(51, "role", "alert");
            builder.AddAttribute(52, "class", "alert" + " alert-danger" + " " + (hidden_alert));
            builder.AddContent(53, "\n          Please enter valid name. Should be at least 3 chars long!\n        ");
            builder.CloseElement();
            builder.AddContent(54, "\n        ");
            builder.AddMarkupContent(55, "<small id=\"emailHelp\" class=\"form-text text-muted\">Our company doesn\'t share data with anyone else... I promise</small>\n      ");
            builder.CloseElement();
            builder.AddContent(56, "\n    ");
            builder.CloseElement();
            builder.AddContent(57, "\n    ");
            builder.OpenElement(58, "div");
            builder.AddAttribute(59, "class", "btn-group btn-group-toggle");
            builder.AddAttribute(60, "data-toggle", "buttons");
            builder.AddContent(61, "\n      ");
            builder.OpenElement(62, "button");
            builder.AddAttribute(63, "class", "btn btn-success");
            builder.AddAttribute(64, "onclick", Microsoft.AspNetCore.Blazor.Components.BindMethods.GetEventHandlerValue<Microsoft.AspNetCore.Blazor.UIMouseEventArgs>(addPerson));
            builder.AddContent(65, "Create");
            builder.CloseElement();
            builder.AddContent(66, "\n      ");
            builder.OpenElement(67, "button");
            builder.AddAttribute(68, "class", "btn btn-primary");
            builder.AddAttribute(69, "onclick", Microsoft.AspNetCore.Blazor.Components.BindMethods.GetEventHandlerValue<Microsoft.AspNetCore.Blazor.UIMouseEventArgs>(goHome));
            builder.AddContent(70, "Back");
            builder.CloseElement();
            builder.AddContent(71, "\n    ");
            builder.CloseElement();
            builder.AddContent(72, "\n  ");
            builder.CloseElement();
            builder.AddContent(73, "\n");
            builder.CloseElement();
        }
        #pragma warning restore 1998
#line 34 "/home/aakatev/Documents/projects20/BlazorApp1/Pages/AddData.cshtml"
            
  static Random rnd = new Random();
  string current_name;
  string hidden_pic = "d-none";
  string hidden_alert = "d-none";
  int current_id = rnd.Next(300);

  List<int> taken_ids = new List<int>();
  Robot[] robots;

  class Robot
  {
    public int id { get; set; }
    public string name { get; set; }
  }


  protected override async Task OnInitAsync()
  { 
    robots = await Http.GetJsonAsync<Robot[]>("https://fxns-at-azure.azurewebsites.net/api/get_data");
    
    foreach (var robot in robots)
    {
      taken_ids.Add(robot.id);
    }

    if (taken_ids.Contains(current_id)) 
    {
      increaseCount();
    }

    hidden_pic = "";

  }


  protected async Task addPerson()
  {
    try
    {
      if (current_name.Length < 3 ) 
      {
        hidden_alert = "";
      } 
      else 
      {
        await Http.SendJsonAsync(
          HttpMethod.Post,
          "https://fxns-at-azure.azurewebsites.net/api/post_data", 
          new Person{id=current_id, name=current_name}
        );
        UriHelper.NavigateTo("/");
      }
    }  
    catch (NullReferenceException) 
    {
      hidden_alert = "";
    }
  }

  void rerender() 
  {
    this.StateHasChanged();
  }

  void increaseCount()
  {
    do {
      current_id++;
    } while (taken_ids.Contains(current_id));

    rerender();
  }

  void decreaseCount()
  {
    do {
      current_id--;
    } while (taken_ids.Contains(current_id));

    rerender();
  }

  void goHome()
  {
    UriHelper.NavigateTo("/");
  }

  class Person
  {
    public int id { get; set; }
    public string name { get; set; }
  }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Blazor.Components.InjectAttribute] private Microsoft.AspNetCore.Blazor.Services.IUriHelper UriHelper { get; set; }
        [global::Microsoft.AspNetCore.Blazor.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
