#pragma checksum "/home/aakatev/Documents/dotnet/BlazorApp1/Pages/AddData.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "9c4230034f98183ac0767ca0081e5f64b4f5712d"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorApp1.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Blazor;
    using Microsoft.AspNetCore.Blazor.Components;
    using System.Net.Http;
    using Microsoft.AspNetCore.Blazor.Layouts;
    using Microsoft.AspNetCore.Blazor.Routing;
    using Microsoft.JSInterop;
    using BlazorApp1;
    using BlazorApp1.Shared;
    [Microsoft.AspNetCore.Blazor.Layouts.LayoutAttribute(typeof(MainLayout))]

    [Microsoft.AspNetCore.Blazor.Components.RouteAttribute("/get_robot")]
    public class AddData : Microsoft.AspNetCore.Blazor.Components.BlazorComponent
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Blazor.RenderTree.RenderTreeBuilder builder)
        {
            base.BuildRenderTree(builder);
            builder.AddMarkupContent(0, "<h3>Create a new robot</h3>\n\n");
            builder.OpenElement(1, "form");
            builder.AddContent(2, "\n  ");
            builder.OpenElement(3, "div");
            builder.AddAttribute(4, "class", "form-group");
            builder.AddContent(5, "\n    ");
            builder.AddMarkupContent(6, "<label for=\"name\">Name</label>\n    ");
            builder.OpenElement(7, "input");
            builder.AddAttribute(8, "type", "text");
            builder.AddAttribute(9, "class", "form-control");
            builder.AddAttribute(10, "id", "name");
            builder.AddAttribute(11, "value", Microsoft.AspNetCore.Blazor.Components.BindMethods.GetValue(current_name));
            builder.AddAttribute(12, "onchange", Microsoft.AspNetCore.Blazor.Components.BindMethods.SetValueHandler(__value => current_name = __value, current_name));
            builder.CloseElement();
            builder.AddContent(13, "\n    ");
            builder.AddMarkupContent(14, "<small id=\"emailHelp\" class=\"form-text text-muted\">Our company doesn\'t share data with anyone else... I promise</small>\n  ");
            builder.CloseElement();
            builder.AddContent(15, "\n  ");
            builder.OpenElement(16, "div");
            builder.AddAttribute(17, "class", "btn-group btn-group-toggle");
            builder.AddAttribute(18, "data-toggle", "buttons");
            builder.AddContent(19, "\n    ");
            builder.OpenElement(20, "button");
            builder.AddAttribute(21, "onclick", Microsoft.AspNetCore.Blazor.Components.BindMethods.GetEventHandlerValue<Microsoft.AspNetCore.Blazor.UIMouseEventArgs>(increaseCount));
            builder.AddAttribute(22, "type", "button");
            builder.AddAttribute(23, "class", "btn btn-secondary btn-sm");
            builder.AddContent(24, "Prev");
            builder.CloseElement();
            builder.AddContent(25, "\n    ");
            builder.OpenElement(26, "button");
            builder.AddAttribute(27, "onclick", Microsoft.AspNetCore.Blazor.Components.BindMethods.GetEventHandlerValue<Microsoft.AspNetCore.Blazor.UIMouseEventArgs>(decreaseCount));
            builder.AddAttribute(28, "type", "button");
            builder.AddAttribute(29, "class", "btn btn-secondary btn-sm");
            builder.AddContent(30, "Next");
            builder.CloseElement();
            builder.AddContent(31, "\n  ");
            builder.CloseElement();
            builder.AddContent(32, "\n");
            builder.CloseElement();
            builder.AddContent(33, "\n");
            builder.OpenElement(34, "img");
            builder.AddAttribute(35, "alt", "Generic placeholder image");
            builder.AddAttribute(36, "width", "200");
            builder.AddAttribute(37, "height", "200");
            builder.AddAttribute(38, "class", "rounded-circle" + " " + (hidden));
            builder.AddAttribute(39, "src", "https://robohash.org/" + (current_id));
            builder.CloseElement();
            builder.AddContent(40, "\n\n");
            builder.OpenElement(41, "div");
            builder.AddAttribute(42, "class", "btn-group btn-group-toggle");
            builder.AddAttribute(43, "data-toggle", "buttons");
            builder.AddContent(44, "\n  ");
            builder.OpenElement(45, "button");
            builder.AddAttribute(46, "class", "btn btn-primary");
            builder.AddAttribute(47, "onclick", Microsoft.AspNetCore.Blazor.Components.BindMethods.GetEventHandlerValue<Microsoft.AspNetCore.Blazor.UIMouseEventArgs>(addPerson));
            builder.AddContent(48, "Create");
            builder.CloseElement();
            builder.AddContent(49, "\n  ");
            builder.OpenElement(50, "button");
            builder.AddAttribute(51, "class", "btn btn-danger");
            builder.AddAttribute(52, "onclick", Microsoft.AspNetCore.Blazor.Components.BindMethods.GetEventHandlerValue<Microsoft.AspNetCore.Blazor.UIMouseEventArgs>(goHome));
            builder.AddContent(53, "Home");
            builder.CloseElement();
            builder.AddContent(54, "\n");
            builder.CloseElement();
        }
        #pragma warning restore 1998
#line 25 "/home/aakatev/Documents/dotnet/BlazorApp1/Pages/AddData.cshtml"
            
  static Random rnd = new Random();
  string current_name;
  string hidden = "d-none";
  int current_id = rnd.Next(300);

  List<int> taken_ids = new List<int>();
  Robot[] robots;

  class Robot
  {
    public int id { get; set; }
    public string name { get; set; }
  }


  protected override async Task OnInitAsync()
  { 
    robots = await Http.GetJsonAsync<Robot[]>("https://fxns-at-azure.azurewebsites.net/api/get_data");
    
    foreach (var robot in robots)
    {
      taken_ids.Add(robot.id);
    }

    if (taken_ids.Contains(current_id)) 
    {
      increaseCount();
    }

    hidden = "";

  }


  protected async Task addPerson()
  {
      await Http.SendJsonAsync(
        HttpMethod.Post,
        "https://fxns-at-azure.azurewebsites.net/api/post_data", 
        new Person{id=current_id, name=current_name}
      );

      UriHelper.NavigateTo("/");
  }

  void rerender() 
  {
    this.StateHasChanged();
  }

  void increaseCount()
  {
    do {
      current_id++;
    } while (taken_ids.Contains(current_id));

    rerender();
  }

  void decreaseCount()
  {
    do {
      current_id--;
    } while (taken_ids.Contains(current_id));

    rerender();
  }

  void goHome()
  {
    UriHelper.NavigateTo("/");
  }

  class Person
  {
      public int id { get; set; }
      public string name { get; set; }
  }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Blazor.Components.InjectAttribute] private Microsoft.AspNetCore.Blazor.Services.IUriHelper UriHelper { get; set; }
        [global::Microsoft.AspNetCore.Blazor.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
